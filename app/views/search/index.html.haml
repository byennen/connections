- @full_page = true

= content_for :head do
  = stylesheet_link_tag 'static/search_detail', 'search', 'static/buttons'
  = javascript_include_tag 'search'

= content_for :page_title do
  .title
    %h1 Search

= content_for :full_page do
  .col-md-6.col-md-offset-3.form3
    %h3 What are you looking for?
    = text_field_tag :terms, "", placeholder: "SEARCH TERMS", class: "bigf"
    %ul.tabsx.col-md-12.col-md-offset-3
      %li.activex
        %a.btn{:href => "#tab1x"} students
      %li
        %a.btn{:href => "#tab2x"} alumni
      %li
        %a.btn{:href => "#tab3x"} club
      %li
        %a.btn{:href => "#tab4x"} event
    .clearfix
    %br
    %br
    .tab_container
      #tab1x.tab_content
        = form_tag :search do
          = text_field :user, :major, placeholder: "MAJOR"
          = text_field :user, :graduation_year, placeholder: "GRAD YEAR"
        %a.search-btn{href: "javascript:;", "data-object" => "student"}
          %button.btn.btn6{:name => "btn"} Search

      / tab_content
      #tab2x.tab_content
        = form_tag :search do
          = text_field :user, :major, placeholder: "MAJOR"
          = text_field :user, :graduation_year, placeholder: "GRAD YEAR"
          .clearfix
          = text_field :user, :city, placeholder: "LOCATION"
          = text_field :user, :field, placeholder: "FIELD"
        %a.search-btn{href: "javascript:;", "data-object" => "alumni"}
          %button.btn.btn6{:name => "btn"} Search

      / tab_content
      #tab3x.tab_content
        = form_tag :search do
          .col-md-6= select :club, :private, options_for_select([["Not Private", false],["Private", true]]), prompt: "All"
          .col-md-6= select :club, :category, options_for_select(Club::CATEGORIES), prompt: "All Category"

          .clearfix
        %a.search-btn{href: "javascript:;", "data-object" => "club"}
          %button.btn.btn6{:name => "btn"} Search

      / tab_content
      #tab4x.tab_content
        = form_tag :search do
          = text_field :event, :start_date, :placeholder => "START DATE", class: "datepicker"
          = text_field :event, :end_date, :placeholder => "END DATE", class: "datepicker"
        %a.search-btn{href: "javascript:;", "data-object" => "event"}
          %button.btn.btn6{:name => "btn"} Search

      
= content_for :header do
  .span10.page-title.top2.bottom2
    %span#person-title who are you looking for?
    %span#club-title.hide what kind of club are you looking for?
    %span#event-title.hide what event are you looking for?
  .span11.no-lmar
    .span3.no-lmar.dropdown
      %a.btn.btn-success.btn2.chang.dropdown-toggle{:href => "javascript:;", :"data-toggle" => 'dropdown'}
        %i
          = image_tag "old_images/dropdown-arrow.png"
      %ul.dropdown-menu{style: "margin: -10px 0 0 22px"}
        %li.search_type
          %a Person
        %li.search_type 
          %a Club
        %li.search_type 
          %a Event
      = text_field_tag :search_object, "Person", class: "field dropdown-toggle", :"data-toggle" => 'dropdown'
  .span11.left
    #person-option
      = render partial: "person_options"
      .span11.no-lmar.bottom2
        .offset7.top2
          = link_to "Search", "javascript:;", class: "btn btn-success", id: "search-button"
    #club-option.hide= render partial: "club_options"
    #event-option.hide= render partial: "event_options"
 
  .row-fluid
    .container
      .span10.top2
        #search-results.top2
          - if params[:term]
            .span12
              %h3 Search for persons
              =  render partial: "persons", locals: {persons: @users}
            .span12.no-lmar.top2
              %h3 Search for clubs
              =  render partial: "clubs"
            .span12.no-lmar.top2
              %h3 Search for events
              =  render partial: "events"

#add-contact.modal.hide
  = simple_form_for Relationship.new(user_id: current_user.id) do |f|
    .modal-header
      %button{type: "button", class: "close", data: {dismiss: "modal"}} &times;
      %h3 Add Contact
    .modal-body
      = f.input :relation_id, as: :hidden
      = f.input :message, as: :text, input_html: {class: 'span5', rows: 10}
    .modal-footer
      = f.submit "Add Contact", class: "btn btn-primary"

= render partial: "shared/new_message"
:javascript
  $(function(){
    $("#search-results").on("click", ".add_contact", function(){
      $("#relationship_relation_id").val($(this).data("user_id"));
    });
  });
